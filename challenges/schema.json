{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Z-Challenge Multi-Language Challenge Schema",
  "type": "object",
  "required": ["id", "metadata", "problem", "languages", "testCases", "editorial"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "Unique identifier for the challenge (kebab-case)."
    },
    "metadata": {
      "type": "object",
      "required": [
        "title",
        "description", 
        "difficulty",
        "points",
        "timeLimit",
        "tags",
        "author",
        "createdAt",
        "version",
        "supportedLanguages"
      ],
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "difficulty": {
          "type": "string",
          "enum": ["easy", "medium", "hard"]
        },
        "points": { "type": "integer", "minimum": 1 },
        "timeLimit": { "type": "integer", "minimum": 1 },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "author": { "type": "string" },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp"
        },
        "version": { "type": "string" },
        "supportedLanguages": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["z--", "cpp", "c", "java", "python", "javascript", "rust", "go"]
          },
          "minItems": 1
        }
      }
    },
    "problem": {
      "type": "object",
      "required": ["statement", "inputFormat", "outputFormat", "constraints", "examples"],
      "properties": {
        "statement": { "type": "string" },
        "inputFormat": { "type": "string" },
        "outputFormat": { "type": "string" },
        "constraints": { "type": "string" },
        "examples": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["input", "output", "explanation"],
            "properties": {
              "input": { "type": "string" },
              "output": { "type": "string" },
              "explanation": { "type": "string" }
            }
          }
        }
      }
    },
    "languages": {
      "type": "object",
      "patternProperties": {
        "^(z--|cpp|c|java|python|javascript|rust|go)$": {
          "type": "object",
          "required": ["starterCode", "solutionCode", "hints", "judge0Id", "compilerType"],
          "properties": {
            "starterCode": { "type": "string" },
            "solutionCode": { "type": "string" },
            "hints": {
              "type": "array",
              "items": { "type": "string" }
            },
            "judge0Id": { 
              "type": ["integer", "null"],
              "description": "Judge0 language ID, null for Z--"
            },
            "compilerType": {
              "type": "string",
              "enum": ["z-studio", "judge0"]
            }
          }
        }
      },
      "additionalProperties": false
    },
    "testCases": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "input", "output", "points", "isHidden", "timeout"],
        "properties": {
          "id": { "type": "string" },
          "input": { "type": "string" },
          "output": { "type": "string" },
          "points": { "type": "integer", "minimum": 0 },
          "isHidden": { "type": "boolean" },
          "timeout": { "type": "integer", "minimum": 1 }
        }
      }
    },
    "editorial": {
      "type": "object",
      "required": ["approach", "complexity", "keywords"],
      "properties": {
        "approach": { "type": "string" },
        "complexity": {
          "type": "object",
          "required": ["time", "space"],
          "properties": {
            "time": { "type": "string" },
            "space": { "type": "string" }
          }
        },
        "keywords": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    }
  },
  "additionalProperties": false
}